apiVersion: v1
data:
   readonlyrest.yml: |
     readonlyrest:
       access_control_rules:
       
       - name: "::KIBANA-SRV::"
         #verbosity: error
         auth_key: kibana:kibana

       - name: "Bearer token" 
         proxy_auth:
           proxy_auth_config: "proxy1"
           #users: ["Bearer *"]
           users: ["Bearer ${KIBANA_SERVICE_ACCOUNT_TOKEN}"]
        
       - name: "PROBE"
         #verbosity: error
         auth_key: "elastic-internal-probe:${INTERNAL_PROBE_PASS}"

       - name: "ELASTIC-INTERNAL"
         #verbosity: error
         auth_key: "elastic-internal:${INTERNAL_USR_PASS}"

       - name: "CONTAINER ADMIN - file"
         type: allow
         auth_key: "admin:container"
     
       - name: "User 1"
         type: allow
         auth_key: "user1:test"
         indices: [".kibana*", "kibana*"]
         kibana_access: ro
       
       proxy_auth_configs:
        - name: "proxy1"
          user_id_header: "Authorization"          


kind: ConfigMap
metadata:
  name: ror-config
